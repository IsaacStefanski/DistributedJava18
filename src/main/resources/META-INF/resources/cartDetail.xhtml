<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">   
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
        <title>Stefanski Pics | Cart</title>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <link rel="stylesheet" type="text/css" href="stefpicsstyle.css"></link>
        <link href="https://fonts.googleapis.com/css?family=Raleway|Roboto+Slab" rel="stylesheet"></link>
        <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css"></link>
    </h:head>
    <h:body>
        <!--HEADER-->
	<header>
            <table>
                <tr>
                    <td>&nbsp;</td>
                    <td><a href="index.xhtml"><img src="images/logo.png" style="width:auto; height:70px;"></img></a></td>
                    <td><a href="index.xhtml"><h2>Stefanski Pics Photography</h2></a></td>
                    <td>&nbsp;</td>
                    <td>
                        <!--SEARCH FORM-->
                        <form method="get" action="PhotoController">
                            <input type="text" name="search"/>
                            <input type="submit" value="Search"/>
                        </form>
                    </td>
                </tr>
            </table>
	</header>
	
	<!--NAVIGATION-->
        <div id="navigation">
            <h:link outcome="index.xhtml" value="Home" />
            <h:outputText value=" | " />
            <h:link outcome="#{photoBean.allPhotos()}" value="Gallery" />
            <h:outputText value=" | " />
            <h:link outcome="cartDetail.xhtml" value="Cart" />
        </div>

        <!--CART DETAILS-->
        <h:outputText value="Number of Items in Your Cart:" />
        <h:outputText value="#{cartBean.numberOfItemsInCart}" />
        
        <div align="center">
            <h1>Here's a look at your cart...</h1>
            <table id="cartTable">
                <tr>
                    <th>Preview</th>
                    <th>Item</th>
                    <th>Price</th>
                </tr>

                <c:set var="total" value="0"></c:set>
                <c:forEach var="item" items="${cartBean.itemsInCart}">
                    <c:set var="total" value="${total + item.price}"></c:set>
                    <tr>
                        <td>
                            <img alt="${item.photoName}" src="images/${item.image.imgFile}" width="100px"></img>
                        </td>
                        <td>${item.photoName}</td>
                        <td>${item.formattedPrice}</td>
                    </tr>
                </c:forEach>
                
                <tr><h2>Total:   $ ${total}</h2></tr>
            </table>
            <br/>
        </div>
        
        <br /><br /><br /><br /><br /><br />
        
        <!--FOOTER-->
	<footer>
		<p>&copy; 2018  |  Isaac Stefanski  |  Stefanski Pics Photography</p>
                <img src="images/logo.png" style="width:auto; height:30px;"></img>
	</footer>
    </h:body>
</html>